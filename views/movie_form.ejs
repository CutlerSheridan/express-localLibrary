<h1><%= title %></h1>
<form method='POST' action=''>
  <div class="form-group">
    <label for="title">Title: </label>
    <input type="text" class="form-control" id="title" name='title' value='<%= locals.movie ? movie.title : "" %>' placeholder='Blade Runner'>
  </div>
  <div class="form-group">
    <label for="director">Director: </label>
    <select class='form-control' id='director' name='director' required>
      <% directors.forEach(dir => { %>
      <% if (locals.movie) { %>
      <!-- <% console.log(movie, movie.director, dir._id) %> -->
      <option value='<%= dir._id %>' selected='<%= movie.director.findIndex(x => x._id === dir._id.str) > -1 ? "selected" : false %>'><%= dir.getName() %></option>
      <% } else { %>
      <option value='<%= dir._id %>'><%= dir.getName() %></option>
      <% } %>
      <% }) %>
    </select>
  </div>
  <div class="form-group">
    <label for="release_year">Release year: </label>
    <input type='text' class='form-control' id='release_year' name='release_year' value='<%= locals.movie ? movie.releaseYear : "" %>'>
  </div>
  <div class="form-group">
    <label for="summary">Summary: </label>
    <input type='text' class='form-control' id='summary' name='summary' value='<%= locals.movie ? movie.summary : '' %>'>
  </div>
  <button type='submit'>Submit</button>
</form>

<% if (locals.errors) { %>
<ul>
  <% errors.forEach(err => { %>
  <li style=' color: red'><%= err.msg %></li>
  <% }) %>
</ul>
<% } %>